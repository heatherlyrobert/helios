#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language
#> METIS Д иииии Д fix db unit test to use sample db NOT real one                         Д N9L6WJ Д  и Д



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                helios.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify openning and closing of database                       0s   open            DB__open, DB__close                                                          ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   FILE   *x_db    = NULL;                                                                                                                                                                                                    
     code     make sure any old test is gone       - - - - - - - - - - - - -   system ("rm -f  /tmp/helios.db       > /bin/null");                                                                                                                                                                        
     code     change name of conf file             - - - - - - - - - - - - -   ystrlcpy (my.file_data, "/tmp/helios.db"                             , LEN_PATH);                                                                                                                                          

   COND       attempt to close with no file open                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       attempt to open a missing file                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    my.file_data                           , 'r'         , &x_db                                          i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       verify openning a file                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     touch the database                   - - - - - - - - - - - - -   system ("touch  /tmp/helios.db       > /bin/null");                                                                                                                                                                        
     exec     call open                            DB__open                    my.file_data                           , 'r'         , &x_db                                          i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_exists    NULL                                                                                                 

   COND       attempt to re-open a file                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    my.file_data                           , 'r'         , &x_db                                          i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_exists    NULL                                                                                                 

   COND       verify closing the file                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       attempt to open with null name                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    NULL                                   , 'r'         , &x_db                                          i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       attempt to open with empty name                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    ""                                     , 'r'         , &x_db                                          i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       attempt to open without file pointer                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    my.file_data                           , 'r'         , NULL                                           i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       attempt to open with bad mode                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    my.file_data                           , '?'         , &x_db                                          i_lesser    0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       verify openning and closing existing for writing                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    my.file_data                           , 'w'         , &x_db                                          i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_exists    NULL                                                                                                 
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       verify openning and closing non-existant for writing               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     make sure any old test is gone       - - - - - - - - - - - - -   system ("rm -f  /tmp/helios.db       > /bin/null");                                                                                                                                                                        
     exec     call open                            DB__open                    my.file_data                           , 'w'         , &x_db                                          i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_exists    NULL                                                                                                 
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    
     echo     ... check file pointer               - - - - - - - - - - - - -   x_db                                                                                                  p_null      NULL                                                                                                 

   COND       verify program teardown                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     make sure any old test is gone       - - - - - - - - - - - - -   system ("rm -f  /tmp/helios.db       > /bin/null");                                                                                                                                                                        
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_pass      0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify reading and writing database header                    0s   header          DB__header_write, DB__header_read                                            ((02.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char      x_prog    [LEN_LABEL] = "";                                                                                                                                                                                      
     local    create working variable              - - - - - - - - - - - - -   char      x_ver     [LEN_LABEL] = "";                                                                                                                                                                                      
     local    create working/return variable       - - - - - - - - - - - - -   int      x_ndrive, x_nconf, x_nmime, x_nentry;                                                                                                                                                                             
     local    create working/return variable       - - - - - - - - - - - - -   FILE     *x_db    = NULL;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   char      x_name    [LEN_DESC]  = "/tmp/helios.db";                                                                                                                                                                        
     local    create working variable              - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      
     exec     remove test file                     yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    

   COND       verify output file does not exist                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     -1                                                                                                   

   COND       verify writing to database                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update name and ver                  - - - - - - - - - - - - -   strcpy (x_prog , "helios");   strcpy (x_ver  , "1.2f" );                                                                                                                                                                   
     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  
     code     update variables                     - - - - - - - - - - - - -   x_ndrive = 4;  x_nconf = 37;  x_nmime = 123;  x_nentry = 632;                                                                                                                                                              
     exec     call open                            DB__open                    x_name         , 'w'            , &x_db                                                               i_equal     0                                                                                                    
     exec     call header write                    DB__head_write              x_db    , x_prog  , x_ver   , x_nconf , x_nmime , x_ndrive, x_nentry, x_heart                         i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    
     exec     ... check on file                    yURG_peek_exists            x_name                                                                                                i_equal     0                                                                                                    

   COND  (0)  verify header contents                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     echo     ... review program                   - - - - - - - - - - - - -   x_prog                                                                                                w_equal     тheliosТ                                                                                             
     echo     ... review version                   - - - - - - - - - - - - -   x_ver                                                                                                 w_equal     т1.2fТ                                                                                               
     echo     ... review drive count               - - - - - - - - - - - - -   x_ndrive                                                                                              i_equal     4                                                                                                    
     echo     ... review conf count                - - - - - - - - - - - - -   x_nconf                                                                                               i_equal     37                                                                                                   
     echo     ... review mime count                - - - - - - - - - - - - -   x_nmime                                                                                               i_equal     123                                                                                                  
     echo     ... review entry count               - - - - - - - - - - - - -   x_nentry                                                                                              i_equal     632                                                                                                  
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     т17.05.13.06.00.00.6.19.133  1494680400   гггггТ                                                     

   COND       clean out variables                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     update name and ver                  - - - - - - - - - - - - -   strcpy (x_prog , ""     );   strcpy (x_ver  , ""     );                                                                                                                                                                    
     code     update heartbeat                     - - - - - - - - - - - - -   strcpy (x_heart, "");                                                                                                                                                                                                      
     code     update variables                     - - - - - - - - - - - - -   x_ndrive = 0;  x_nconf =  0;  x_nmime =   0;  x_nentry =   0;                                                                                                                                                              

   COND       verify grounded header contents                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     echo     ... review program                   - - - - - - - - - - - - -   x_prog                                                                                                w_equal     тТ                                                                                                   
     echo     ... review version                   - - - - - - - - - - - - -   x_ver                                                                                                 w_equal     тТ                                                                                                   
     echo     ... review drive count               - - - - - - - - - - - - -   x_ndrive                                                                                              i_equal     0                                                                                                    
     echo     ... review conf count                - - - - - - - - - - - - -   x_nconf                                                                                               i_equal     0                                                                                                    
     echo     ... review mime count                - - - - - - - - - - - - -   x_nmime                                                                                               i_equal     0                                                                                                    
     echo     ... review entry count               - - - - - - - - - - - - -   x_nentry                                                                                              i_equal     0                                                                                                    
     echo     ... review heartbeat                 - - - - - - - - - - - - -   x_heart                                                                                               w_equal     тТ                                                                                                   

   COND       verify reading from database                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    x_name         , 'r'            , &x_db                                                               i_equal     0                                                                                                    
     exec     call header read                     DB__head_read               x_db    , x_prog  , x_ver   , &x_nconf , &x_nmime , &x_ndrive, &x_nentry                , x_heart     i_equal     0                                                                                                    
     exec     call database close                  DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    

   DITTO (0)  [ verify header contents ]                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove test file                     yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify manual writing and reading of drives                   0s   drive           DB__drive_write                                                              ((03.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create return/working variable       - - - - - - - - - - - - -   FILE   *x_db    = NULL;                                                                                                                                                                                                    
     local    create return/working variable       - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      
     local    create return/working variable       - - - - - - - - - - - - -   int       n     = 0;                                                                                                                                                                                                       
     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  

   REUSE -A-  [ create a simplified mime group for testing ]                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -F-  [ verify common mime sample setup ]                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       create a couple drives                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call manual                          DRIVE_manual                NULL  ,  0, "my_host"   , "serial##"  , "/dev/sda1" , "/mnt/usb1"           , "ext4" , 12345, 12345   i_equal     0                                                                                                    
     exec     call manual                          DRIVE_manual                NULL  , 12, "hosty"     , "WD1234567" , "/dev/full" , "/"                   , "ext2" ,   345,   345   i_equal     0                                                                                                    
     get      ... review drive count               DRIVE__unit                 "count"     ,    0                                                                                    s_equal     DRIVE count      : num=   2, fore=   2, back=   2, max =  12                                         
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    0                                                                                    s_equal     DRIVE entry ( 0) : 0  [my_host   ] [serial##  ] [/dev/sda1 ] [/mnt/usb1 ] [ext4      ]               
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    1                                                                                    s_equal     DRIVE entry ( 1) : 12 [hosty     ] [WD1234567 ] [/dev/full ] [/         ] [ext2      ]               
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    2                                                                                    s_equal     DRIVE entry ( 2) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    3                                                                                    s_equal     DRIVE entry ( 3) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    4                                                                                    s_equal     DRIVE entry ( 4) : no entry                                                                          

   COND       open a blank file for writing                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    "/tmp/helios.db"                       , 'w'         , &x_db                                          i_equal     0                                                                                                    
     exec     call header write                    DB__head_write              x_db, P_BASENAME, P_VERNUM,    0,    0, g_ndrive,    0, x_heart                                       i_equal     0                                                                                                    

   COND       write the database drives list                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call drive write                     DB__drive_write             x_db                                                                                                  i_equal     0                                                                                                    

   COND       close it                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    

   COND       purge the list                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     run purge                            DRIVE__purge                                                                                                                      i_equal     0                                                                                                    
     get      ... review drive count               DRIVE__unit                 "count"     ,    0                                                                                    s_equal     DRIVE count      : num=   0, fore=   0, back=   0, max =  -1                                         
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    0                                                                                    s_equal     DRIVE entry ( 0) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    1                                                                                    s_equal     DRIVE entry ( 1) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    2                                                                                    s_equal     DRIVE entry ( 2) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    3                                                                                    s_equal     DRIVE entry ( 3) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    4                                                                                    s_equal     DRIVE entry ( 4) : no entry                                                                          

   COND       open the file for reading                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    "/tmp/helios.db"                       , 'r'         , &x_db                                          i_equal     0                                                                                                    
     exec     call header read                     DB__head_read               x_db, NULL      , NULL    , NULL, NULL, &n      , NULL, NULL                                          i_equal     0                                                                                                    
     echo     ... check count                      - - - - - - - - - - - - -   n                                                                                                     i_equal     2                                                                                                    

   COND       read the database drives list                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call drive read                      DB__drive_read              x_db            , n                                                                                   i_equal     0                                                                                                    

   COND       close it                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    
     code     make sure any old test is gone       - - - - - - - - - - - - -   system ("rm -f  /tmp/helios.db       > /bin/null");                                                                                                                                                                        

   COND       check the list                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review drive count               DRIVE__unit                 "count"     ,    0                                                                                    s_equal     DRIVE count      : num=   2, fore=   2, back=   2, max =  12                                         
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    0                                                                                    s_equal     DRIVE entry ( 0) : 0  [my_host   ] [serial##  ] [/dev/sda1 ] [/mnt/usb1 ] [ext4      ]               
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    1                                                                                    s_equal     DRIVE entry ( 1) : 12 [hosty     ] [WD1234567 ] [/dev/full ] [/         ] [ext2      ]               
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    2                                                                                    s_equal     DRIVE entry ( 2) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    3                                                                                    s_equal     DRIVE entry ( 3) : no entry                                                                          
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    4                                                                                    s_equal     DRIVE entry ( 4) : no entry                                                                          

   COND       verify program teardown                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((03.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_pass      0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify manual writing and reading of entries                  0s   entry                                                                                        ((04.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   tDRIVE *x_drive = NULL;                                                                                                                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   tPTRS  *x_root  = NULL;                                                                                                                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   FILE   *x_db    = NULL;                                                                                                                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   int     x_count =    0;                                                                                                                                                                                                    
     local    create return/working variable       - - - - - - - - - - - - -   char      x_heart   [LEN_DESC]  = "";                                                                                                                                                                                      
     local    create return/working variable       - - - - - - - - - - - - -   int       n     = 0;                                                                                                                                                                                                       
     code     update heartbeat                     - - - - - - - - - - - - -   yEXEC_heartbeat (12345, 1494680400, NULL, NULL, x_heart);                                                                                                                                                                  

   REUSE -A-  [ create a simplified mime group for testing ]                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -F-  [ verify common mime sample setup ]                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare a test directory                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     make sure any old test is gone       - - - - - - - - - - - - -   system ("rm -fr /tmp/helios_tst > /bin/null");                                                                                                                                                                             
     code     create a test directory              - - - - - - - - - - - - -   system ("mkdir /tmp/helios_tst/ > /bin/null");                                                                                                                                                                             

   COND       add files to the root                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     copy in a configuration file         - - - - - - - - - - - - -   system ("cp -f /etc/host.conf             /tmp/helios_tst/");                                                                                                                                                              
     code     copy in an ascii txt file            - - - - - - - - - - - - -   system ("cp -f /tmp/vi_clip.txt           /tmp/helios_tst");                                                                                                                                                               
     code     copy in a library file               - - - - - - - - - - - - -   system ("cp -f /lib64/librc.so.1          /tmp/helios_tst");                                                                                                                                                               

   COND       create a drive                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call manual                          DRIVE_manual                &x_drive,  2, "siquei"   , "WD1234567" , "/dev/full" , "/tmp/helios_tst" , "ext4" ,   345,   345      i_equal     0                                                                                                    
     get      ... review drive count               DRIVE__unit                 "count"     ,    0                                                                                    s_equal     DRIVE count      : num=   1, fore=   1, back=   1, max =   2                                         
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    0                                                                                    s_equal     DRIVE entry ( 0) : 2  [siquei    ] [WD1234567 ] [/dev/full ] [/tmp/helio] [ext4      ]               
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    1                                                                                    s_equal     DRIVE entry ( 1) : no entry                                                                          

   COND       create a root entry                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call root (full)                     ENTRY_fullroot              &x_root     , x_drive                                                                                 i_equal     0                                                                                                    
     get      ... review count                     ENTRY__unit                 "count"     ,    0                                                                                    s_equal     ENTRY count      : num=   1, fore=   1, back=   1                                                    
     get      ... review entry                     ENTRY__unit                 "entry"     ,    0                                                                                    s_equal     ENTRY entry ( 0) : 2   0  15[/tmp/helios_tst     ]   d -   d d_dir    г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    1                                                                                    s_equal     ENTRY entry ( 1) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    2                                                                                    s_equal     ENTRY entry ( 2) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    3                                                                                    s_equal     ENTRY entry ( 3) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    4                                                                                    s_equal     ENTRY entry ( 4) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    5                                                                                    s_equal     ENTRY entry ( 5) : no entry                                                                          
     get      ... review children                  TREE__unit                  x_root       , "nchild"  ,    0                                                                       s_equal     TREE nchild      :  0n,  0f,  0b    [-                   ] [-                   ]                    

   COND       check in tree order                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    0                                                                        s_equal     TREE walk   ( 0) : 2   0  15[/tmp/helios_tst     ]   d -   d d_dir    [/tmp/helios_tst]              
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    1                                                                        s_equal     TREE walk   ( 1) : no such entry                                                                     

   COND       open a file for writing                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    "/tmp/helios.db"                       , 'w'         , &x_db                                          i_equal     0                                                                                                    
     exec     call header write                    DB__head_write              x_db, P_BASENAME, P_VERNUM,    0,    0, g_ndrive, g_nptrs, x_heart                                    i_equal     0                                                                                                    

   COND       write the root entry                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call write                           DB__entry_write             x_db        , x_root->data      , &x_count                                                            i_equal     0                                                                                                    
     echo     ... check count                      - - - - - - - - - - - - -   x_count                                                                                               i_equal     1                                                                                                    

   COND       close it                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    

   COND       purge the list                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     run purge                            ENTRY__purge                                                                                                                      i_equal     0                                                                                                    
     code     reset root pointer                   - - - - - - - - - - - - -   x_drive->root = NULL;                                                                                                                                                                                                      
     code     reset root pointer                   - - - - - - - - - - - - -   x_root        = NULL;                                                                                                                                                                                                      
     echo     ... head pointer                     - - - - - - - - - - - - -   h_ptrs                                                                                                p_null      NULL                                                                                                 
     get      ... review count                     ENTRY__unit                 "count"     ,    0                                                                                    s_equal     ENTRY count      : num=   0, fore=   0, back=   0                                                    
     get      ... review entry                     ENTRY__unit                 "entry"     ,    0                                                                                    s_equal     ENTRY entry ( 0) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    1                                                                                    s_equal     ENTRY entry ( 1) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    2                                                                                    s_equal     ENTRY entry ( 2) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    3                                                                                    s_equal     ENTRY entry ( 3) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    4                                                                                    s_equal     ENTRY entry ( 4) : no entry                                                                          

   COND       open the file for reading                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call open                            DB__open                    "/tmp/helios.db"                       , 'r'         , &x_db                                          i_equal     0                                                                                                    
     exec     call header read                     DB__head_read               x_db, NULL      , NULL    , NULL, NULL, NULL    , NULL, NULL                                          i_equal     0                                                                                                    
     code     reset the counter                    - - - - - - - - - - - - -   x_count = 0;                                                                                                                                                                                                               

   COND       read the root entry                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.014))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            DB__entry_read              x_db                            , &x_count                                                            i_equal     0                                                                                                    
     echo     ... check count                      - - - - - - - - - - - - -   x_count                                                                                               i_equal     1                                                                                                    
     code     reset root pointer                   - - - - - - - - - - - - -   x_root        = h_ptrs;                                                                                                                                                                                                    

   COND       close it                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call close                           DB__close                   &x_db                                                                                                 i_equal     0                                                                                                    

   COND       review entries                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review count                     ENTRY__unit                 "count"     ,    0                                                                                    s_equal     ENTRY count      : num=   1, fore=   1, back=   1                                                    
     get      ... review entry                     ENTRY__unit                 "entry"     ,    0                                                                                    s_equal     ENTRY entry ( 0) : 2   0  15[/tmp/helios_tst     ]   d -   d d_dir    г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    1                                                                                    s_equal     ENTRY entry ( 1) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    2                                                                                    s_equal     ENTRY entry ( 2) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    3                                                                                    s_equal     ENTRY entry ( 3) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    4                                                                                    s_equal     ENTRY entry ( 4) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    5                                                                                    s_equal     ENTRY entry ( 5) : no entry                                                                          

   COND       read the files into structure                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.017))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call read                            ENTRY__level_read           x_root   , ""                                , '-'                                                    i_equal     0                                                                                                    
     get      ... review count                     ENTRY__unit                 "count"     ,    0                                                                                    s_equal     ENTRY count      : num=   4, fore=   4, back=   4                                                    
     get      ... review entry                     ENTRY__unit                 "entry"     ,    0                                                                                    s_equal     ENTRY entry ( 0) : 2   0  15[/tmp/helios_tst     ]   d -   d d_dir    г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    1                                                                                    s_equal     ENTRY entry ( 1) : 2   1  10[librc.so.1          ]   - -   j j_lib    г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    2                                                                                    s_equal     ENTRY entry ( 2) : 2   1  11[vi_clip.txt         ]   - -   t txt      г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    3                                                                                    s_equal     ENTRY entry ( 3) : 2   1   9[host.conf           ]   - -   t conf     г гггггг   гг гг               
     get      ... review entry                     ENTRY__unit                 "entry"     ,    4                                                                                    s_equal     ENTRY entry ( 4) : no entry                                                                          
     get      ... review entry                     ENTRY__unit                 "entry"     ,    5                                                                                    s_equal     ENTRY entry ( 5) : no entry                                                                          
     get      ... review children                  TREE__unit                  h_ptrs       , "nchild"  ,    0                                                                       s_equal     TREE nchild      :  3n,  3f,  3b    [host.conf           ] [vi_clip.txt         ]                    
     get      ... review children                  TREE__unit                  x_root       , "nchild"  ,    0                                                                       s_equal     TREE nchild      :  3n,  3f,  3b    [host.conf           ] [vi_clip.txt         ]                    
     echo     ... root vs head                     - - - - - - - - - - - - -   x_root                                                                                                p_equal     h_ptrs                                                                                               

   COND       check in tree order                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.018))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    0                                                                        s_equal     TREE walk   ( 0) : 2   0  15[/tmp/helios_tst     ]   d -   d d_dir    [/tmp/helios_tst]              
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    1                                                                        s_equal     TREE walk   ( 1) : 2   1   9[host.conf           ]   - -   t conf     [/tmp/helios_tst/host.conf]    
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    2                                                                        s_equal     TREE walk   ( 2) : 2   1  10[librc.so.1          ]   - -   j j_lib    [/tmp/helios_tst/librc.so.1]   
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    3                                                                        s_equal     TREE walk   ( 3) : 2   1  11[vi_clip.txt         ]   - -   t txt      [/tmp/helios_tst/vi_clip.txt]  
     get      ... review entry in walking order    TREE__unit                  x_root      , "walk"    ,    4                                                                        s_equal     TREE walk   ( 4) : no such entry                                                                     

   COND       verify program teardown                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.019))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_pass      0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (DB) verify writing and reading of everything                      0s   everything      DB_write, DB_read                                                            ((07.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create return/working variables      - - - - - - - - - - - - -   int     x_count =    0;                                                                                                                                                                                                    

   REUSE -A-  [ create a simplified mime group for testing ]                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -F-  [ verify common mime sample setup ]                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -D-  [ create sample configuration ]                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -B-  [ common setup of database environment for searching ]             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -E-  [ verify sample configuration result ]                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       review the ocnfiguration usage                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review count                     CONF__unit                  "count"     , 0                                                                                       s_equal     CONF count       : 3                                                                                 
     get      ... review entry                     CONF__unit                  "entry"     , 0                                                                                       s_equal     CONF entry  ( 0) : x   4т.gitТ                             4  т-Т                                    
     get      ... review entry                     CONF__unit                  "entry"     , 1                                                                                       s_equal     CONF entry  ( 1) : !  27т/tmp/helios_tst/middle/lateТ      1  т-Т                                    
     get      ... review entry                     CONF__unit                  "entry"     , 2                                                                                       s_equal     CONF entry  ( 2) : +  27т/tmp/helios_tst/middle/tuesТ      1  т-Т                                    
     get      ... review entry                     CONF__unit                  "entry"     , 3                                                                                       s_equal     CONF entry  ( 3) : no entry                                                                          

   REUSE -H-  [ verify common mime sample setup ]                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       write the complete structure                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call write                           DB_write                    "/tmp/helios.db"  , &x_count                                                                          i_equal     0                                                                                                    
     echo     ... check count                      - - - - - - - - - - - - -   x_count                                                                                               i_equal     37                                                                                                   

   COND       purge all entries                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     run purge                            ENTRY__purge                                                                                                                      i_equal     0                                                                                                    
     get      ... review count                     ENTRY__unit                 "count"     ,    0                                                                                    s_equal     ENTRY count      : num=   0, fore=   0, back=   0                                                    
     get      ... review entry                     ENTRY__unit                 "entry"     ,    0                                                                                    s_equal     ENTRY entry ( 0) : no entry                                                                          

   COND       purge all drives                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     run purge                            DRIVE__purge                                                                                                                      i_equal     0                                                                                                    
     get      ... review drive count               DRIVE__unit                 "count"     ,    0                                                                                    s_equal     DRIVE count      : num=   0, fore=   0, back=   0, max =  -1                                         
     get      ... review drive entry               DRIVE__unit                 "entry"     ,    0                                                                                    s_equal     DRIVE entry ( 0) : no entry                                                                          

   COND       purge all configuration                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     run purge                            CONF__purge                                                                                                                       i_equal     0                                                                                                    
     get      ... review count                     CONF__unit                  "count"     , 0                                                                                       s_equal     CONF count       : 0                                                                                 
     get      ... review entry                     CONF__unit                  "entry"     , 0                                                                                       s_equal     CONF entry  ( 0) : no entry                                                                          

   COND       purge all mime                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           MIME__purge                                                                                                                       i_equal     0                                                                                                    
     get      ... review count                     MIME__unit                  "count"     , NULL       ,   0                                                                        s_equal     MIME count       : all  =   0, cat  =   0, ext  =   0                                                
     get      ... review entry                     MIME__unit                  "entry"     , NULL       ,   0                                                                        s_equal     MIME entry (???) : и и иии  иииииииии  тТ                      и  s[ии,иии,иииииии]  k[ии,иии,иииииии]  f[ии,иии,иииииии] 

   COND       read the structure back                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     reset the counter                    - - - - - - - - - - - - -   x_count = 0;                                                                                                                                                                                                               
     exec     call read                            DB_read                     "/tmp/helios.db"  , &x_count                                                                          i_equal     0                                                                                                    
     echo     ... check count                      - - - - - - - - - - - - -   x_count                                                                                               i_equal     37                                                                                                   

   REUSE -G-  [ verify sample configuration result ]                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.014))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   REUSE -H-  [ verify common mime sample setup ]                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program teardown                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((07.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_pass      0                                                                                                    



# end-of-file.  done, finito, completare, whimper [¤┤иии
